<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Ajax Post 传值</title>
</head>
<script language="javascript">

function saveUserInfo()
{
    //获取接受返回信息层
    var name= document.getElementById("name");
    var dizhi= document.getElementById("dizhi");
    var msg = document.getElementById("msg");
    var news= document.getElementById("news");

    //获取表单对象和用户信息值
    var f = document.info;
    var name = f.name.value;

    //接收表单的URL地址
    var url = "cgi-bin/python.py";

    //需要POST的值，把每个变量都通过&来联接
    var postStr = "name=" + name

    //实例化Ajax
    //var ajax = InitAjax();


    var ajax = false;
    //开始初始化XMLHttpRequest对象
    if(window.XMLHttpRequest) 
    {     //Mozilla 浏览器
        ajax = new XMLHttpRequest();
        if (ajax.overrideMimeType) 
        {    //设置MiME类别
            ajax.overrideMimeType("text/xml");
        }
    }
    else if (window.ActiveXObject) 
    {     // IE浏览器
        try 
        {
            ajax = new ActiveXObject("Msxml2.XMLHTTP");
        } 
        catch (e) 
        {
            try 
            {
                ajax = new ActiveXObject("Microsoft.XMLHTTP");
            } 
            catch (e) {}
         }
    }
    if (!ajax) 
    {     // 异常，创建对象实例失败
        window.alert("不能创建XMLHttpRequest对象实例.");
        return false;
    }

    //通过Post方式打开连接
    ajax.open("POST", url, true);

    //定义传输的文件HTTP头信息
    ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");

    //发送POST数据
    ajax.send(postStr);

    //获取执行状态
    ajax.onreadystatechange = function() 
    { 
           //如果执行状态成功，那么就把返回信息写到指定的层里
           if (ajax.readyState == 4 && ajax.status == 200) 
        {
            msg.innerHTML = ajax.responseText;
            alert(ajax.responseText)
            //msg.innerHTML = ajax.return; 
           } 
    } 
}

function saveUserInfo2(page)
{
    //获取接受返回信息层
    var page = page
    

    //接收表单的URL地址
    var url = "cgi-bin/python.py";

    //需要POST的值，把每个变量都通过&来联接
    var postStr = "page="+ page;

    //实例化Ajax
    //var ajax = InitAjax();


    var ajax = false;
    //开始初始化XMLHttpRequest对象
    if(window.XMLHttpRequest) 
    {     //Mozilla 浏览器
        ajax = new XMLHttpRequest();
        if (ajax.overrideMimeType) 
        {    //设置MiME类别
            ajax.overrideMimeType("text/xml");
        }
    }
    else if (window.ActiveXObject) 
    {     // IE浏览器
        try 
        {
            ajax = new ActiveXObject("Msxml2.XMLHTTP");
        } 
        catch (e) 
        {
            try 
            {
                ajax = new ActiveXObject("Microsoft.XMLHTTP");
            } 
            catch (e) {}
         }
    }
    if (!ajax) 
    {     // 异常，创建对象实例失败
        window.alert("不能创建XMLHttpRequest对象实例.");
        return false;
    }

    //通过Post方式打开连接
    ajax.open("POST", url, true);

    //定义传输的文件HTTP头信息
    ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");

    //发送POST数据
    ajax.send(postStr);

    //获取执行状态
    ajax.onreadystatechange = function() 
    { 
           //如果执行状态成功，那么就把返回信息写到指定的层里
           if (ajax.readyState == 4 && ajax.status == 200) 
        {
            msg.innerHTML = ajax.responseText;
            alert(ajax.responseText)
            //msg.innerHTML = ajax.return; 
           } 
    } 
}

function saveUserInfo3(dizhi)
{
    //获取接受返回信息层
    var episode = dizhi
    

    //接收表单的URL地址
    var url = "cgi-bin/python.py";

    //需要POST的值，把每个变量都通过&来联接
    var postStr = "episode="+ episode ;

    //实例化Ajax
    //var ajax = InitAjax();


    var ajax = false;
    //开始初始化XMLHttpRequest对象
    if(window.XMLHttpRequest) 
    {     //Mozilla 浏览器
        ajax = new XMLHttpRequest();
        if (ajax.overrideMimeType) 
        {    //设置MiME类别
            ajax.overrideMimeType("text/xml");
        }
    }
    else if (window.ActiveXObject) 
    {     // IE浏览器
        try 
        {
            ajax = new ActiveXObject("Msxml2.XMLHTTP");
        } 
        catch (e) 
        {
            try 
            {
                ajax = new ActiveXObject("Microsoft.XMLHTTP");
            } 
            catch (e) {}
         }
    }
    if (!ajax) 
    {     // 异常，创建对象实例失败
        window.alert("不能创建XMLHttpRequest对象实例.");
        return false;
    }

    //通过Post方式打开连接
    ajax.open("POST", url, true);

    //定义传输的文件HTTP头信息
    ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");

    //发送POST数据
    ajax.send(postStr);

    //获取执行状态
    ajax.onreadystatechange = function() 
    { 
           //如果执行状态成功，那么就把返回信息写到指定的层里
           if (ajax.readyState == 4 && ajax.status == 200) 
        {
            var contents = ajax.responseText;
	    content = eval(contents);
	    
	    alert(content);
	    
	    saveUserInfo4();
           } 
    } 
}

function saveUserInfo4()
{
    //获取接受返回信息层
    var imgs = encodeURIComponent(content);
    

    //接收表单的URL地址
    var url = "cgi-bin/python.py";

    //需要POST的值，把每个变量都通过&来联接
    var postStr = "imgs=" + imgs;

    //实例化Ajax
    //var ajax = InitAjax();


    var ajax = false;
    //开始初始化XMLHttpRequest对象
    if(window.XMLHttpRequest) 
    {     //Mozilla 浏览器
        ajax = new XMLHttpRequest();
        if (ajax.overrideMimeType) 
        {    //设置MiME类别
            ajax.overrideMimeType("text/xml");
        }
    }
    else if (window.ActiveXObject) 
    {     // IE浏览器
        try 
        {
            ajax = new ActiveXObject("Msxml2.XMLHTTP");
        } 
        catch (e) 
        {
            try 
            {
                ajax = new ActiveXObject("Microsoft.XMLHTTP");
            } 
            catch (e) {}
         }
    }
    if (!ajax) 
    {     // 异常，创建对象实例失败
        window.alert("不能创建XMLHttpRequest对象实例.");
        return false;
    }

    //通过Post方式打开连接
    ajax.open("POST", url, true);

    //定义传输的文件HTTP头信息
    ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded");

    //发送POST数据
    ajax.send(postStr);

    //获取执行状态
    ajax.onreadystatechange = function() 
    { 
           //如果执行状态成功，那么就把返回信息写到指定的层里
           if (ajax.readyState == 4 && ajax.status == 200) 
        {
            url = ajax.responseText;
            var msg = document.getElementById('msg')
            msg.innerHTML = url
           } 
    } 
}



</script>

<body >
<meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">
<meta name="referrer" content="never">
<div id="msg"></div>
<!-- <img id="img" src="" width="100%" height="auto" max-width="100%" max-height="100%"> -->
<input type='button' onclick='turn()' value='hahahahahahahaha'>
<form name="info" method="post" action="">
漫画：<input type="text" name="name" /><br />
<input type="button" value="提交表单" onClick="saveUserInfo()">
</form>
</body>
</html>